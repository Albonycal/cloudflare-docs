{{- $filename := .Page.RelPermalink -}}
{{- $learningPath := (index .Site.Data.learning_paths $filename) -}}

{{- if $learningPath -}}
<div class="header">
<h1>{{- $learningPath.title -}}</h1>
<p><em>Learning path</em></p>
<p>{{- $learningPath.description -}}</p>
</div>

<div class="background">
{{- range $index, $module := $learningPath.modules -}}

<div class="learningPathModule">
<div class="moduleHeader">
<h2>{{.title}}</h2>
<p>{{.description}}</p>
</div>
{{- if eq $index 0 -}}
<details open>
{{ else }}
<details>
{{ end }}
<summary>Contains {{len .pages}} units</summary>
<div>
    <ul>
    {{- range .pages -}}
    {{ if isset . "external_link_title" }}
        <li><a href="{{.url_path}}">{{.external_link_title}}  {{- partialCached "external.icon" . -}}</a></li>
    {{ else }}
    {{ with $.Site.GetPage (replaceRE "/$" "" .url_path) }}
    
    <li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
    {{- end -}}
    {{- end -}}
    {{- end -}}
    </ul>

</div>
</details>
</div>


{{ end }}

{{ else }}

Does not match the full url path of an existing learning path.

{{end}}

<div class="GoBack">
    <a href="/learning-paths/">View other learning paths</a>
</div>

</div>

